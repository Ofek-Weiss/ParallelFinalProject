[README.md](https://github.com/user-attachments/files/21740280/README.md)
# Parallel Implementation of Proximity Criteria

## Final Project - Course 10324, Parallel and Distributed Computation
### Spring Semester 2025

**Student:** Ofek Weiss  
**Implementation:** MPI + OpenMP Hybrid Parallelization

## Project Overview

This project implements a parallel solution for the Proximity Criteria problem using MPI (Message Passing Interface) for distributed memory parallelism and OpenMP for shared memory parallelism.

### Problem Description

Given a set of N points in a two-dimensional plane, where each point P has coordinates (x, y) defined by:
- x = ((x2 + x1) / 2) * cos(t*Ï€/2) + (x2 - x1) / 2
- y = a*x + b

**Proximity Criteria:** A point P satisfies the criteria if there exist at least K points in the set with distance from P less than a given value D.

**Goal:** For tCount + 1 values of t (t = 2*i/tCount - 1, i = 0,1,2,...,tCount), find if there exist at least 3 points that satisfy the Proximity Criteria.

## Files Description

- `main.c` - MPI + OpenMP hybrid parallel implementation
- `serial.c` - Sequential baseline implementation for comparison
- `Makefile` - Build configuration for both versions
- `input.txt` - Input data file (must be created by user)
- `output.txt` - Output results file (generated by program)
- `DOCUMENTATION.md` - Comprehensive project documentation


## Input File Format

Create a file named `input.txt` with the following format:

```
N K D TCount
id x1 x2 a b
id x1 x2 a b
...
```

Where:
- `N` - Number of points
- `K` - Minimum number of neighbors required
- `D` - Distance threshold for proximity criteria
- `TCount` - Number of time steps (t values to check)
- `id` - Point identifier
- `x1, x2, a, b` - Point parameters

### Example Input File

```
4 2 1.23 100
0 2.2 1.2 2 45.07
1 -1 26.2 4.4 -3.3
2 -43.3 12.2 4.7 20
3 11.0 -6.6 12.5 23
```

## Execution Instructions

```bash
#compile the project
make
```

### Serial Version (Baseline)

```bash
# Run serial version
./serial
```

### Parallel Version

```bash
# Run with 2 MPI processes
mpirun -np 2 ./parallel

# Run with 4 MPI processes
mpirun -np 4 ./parallel

# Run with 8 MPI processes
mpirun -np 8 ./parallel

# Run on 2 computers
mpirun -np 4 -hostfile myhost ./parallel
```

## Output Format

The program generates `output.txt` with results in the following format:

```
Points id1, id2, id3 satisfy criteria at t = t_value
Points id4, id5, id6 satisfy criteria at t = t_value
...
There were no 3 points found for any t.
```

## Parallelization Strategy

### MPI Level (Distributed Memory)
- Distributes t values among MPI processes
- Each process handles a subset of time steps
- Load balancing with extra work distribution

### OpenMP Level (Shared Memory)
- Parallelizes position computation within each process
- Parallelizes neighbor counting with dynamic scheduling
- Thread count: `omp_get_num_procs() / MPI_size`

### Load Balancing
- **MPI**: Round-robin distribution of t values
- **OpenMP**: Dynamic scheduling for neighbor counting

## Performance Optimizations

1. **Early Termination**: Stop counting neighbors when K neighbors found
2. **Dynamic Scheduling**: OpenMP dynamic scheduling for better load balancing
3. **Memory Efficiency**: Reuse position arrays
4. **Communication Optimization**: Batch result collection

## Troubleshooting

### Common Issues

1. **"Cannot open input.txt"**
   - Ensure `input.txt` exists in the current directory
   - Check file permissions

2. **"Need at least 2 processes"**
   - Use `mpirun -np 2` or more processes

3. **Build errors**
   - Ensure MPI and OpenMP are installed
   - Check compiler compatibility

### Debug Output

The parallel version includes debug output showing:
- Number of MPI processes and OpenMP threads
- Results found per process
- Total execution time

## Validation

The parallel implementation has been validated by:
- Comparing output with serial version
- Testing on VLAB environment
- Verifying correctness for various input sizes
